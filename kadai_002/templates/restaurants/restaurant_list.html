{% extends "base.html" %}
{% block title %}店舗一覧 | NAGOYAMESHI{% endblock %}

{% block content %}
<h1 class="mb-4">店舗一覧</h1>

{# ---- カテゴリ絞り込みボタン ---- #}
<div class="mb-4">
  {# すべてボタン #}
  <a href="{% url 'restaurants:restaurant_list' %}"
     class="btn btn-sm {% if not current_category_id %}btn-primary{% else %}btn-outline-primary{% endif %}">
    すべて
  </a>

  {# 各カテゴリボタン #}
  {% for cat in categories %}
    <a href="{% url 'restaurants:restaurant_list' %}?category={{ cat.id }}"
       class="btn btn-sm
              {% if current_category_id == cat.id|stringformat:'s' %}
                btn-primary
              {% else %}
                btn-outline-primary
              {% endif %}">
      {{ cat.name }}
    </a>
  {% endfor %}
</div>

{# ---- 店舗カード一覧 ---- #}
<div class="row g-4">
  {% for restaurant in restaurants %}
    <div class="col-md-4 col-sm-6">
      <div class="card h-100 shadow-sm">
        {% if restaurant.image %}
          <img src="{{ restaurant.image.url }}"
               class="card-img-top"
               alt="{{ restaurant.name }}">
        {% endif %}

        <div class="card-body">
          <h5 class="card-title">{{ restaurant.name }}</h5>
          <p class="card-text small text-muted mb-1">
            {{ restaurant.category.name }} / {{ restaurant.address }}
          </p>
          <p class="card-text small mb-2">
            営業時間: {{ restaurant.open_time }}〜{{ restaurant.close_time }}
          </p>

          <a href="{% url 'restaurants:restaurant_detail' restaurant.pk %}"
             class="btn btn-primary btn-sm">
            詳細を見る
          </a>
        </div>
      </div>
    </div>
  {% empty %}
    <p>このカテゴリにはまだ店舗がありません。</p>
  {% endfor %}
</div>
{% endblock %}
